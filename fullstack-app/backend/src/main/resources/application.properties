# ============================================================
# StockDSL Backend Configuration
# ============================================================
#
# This file uses environment variables for sensitive data.
# In development, defaults are provided.
# In production, set these environment variables in AWS.
#
# ============================================================

# Application
spring.application.name=stockdsl-backend
server.port=${PORT:8080}

# ============================================================
# Database Configuration (PostgreSQL)
# ============================================================
# Environment variables used in production:
# - DATABASE_URL: Full JDBC URL (jdbc:postgresql://host:5432/dbname)
# - DATABASE_USERNAME: Database username
# - DATABASE_PASSWORD: Database password
#
# Default values are for local development only!
spring.datasource.url=${DATABASE_URL:jdbc:postgresql://localhost:5432/stockdsl}
spring.datasource.username=${DATABASE_USERNAME:postgres}
spring.datasource.password=${DATABASE_PASSWORD:postgres}
spring.datasource.driver-class-name=org.postgresql.Driver

# Connection pool settings (good for production)
spring.datasource.hikari.maximum-pool-size=${DB_POOL_SIZE:5}
spring.datasource.hikari.minimum-idle=2

# JPA/Hibernate
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect
# Use 'validate' in production, 'update' in development
spring.jpa.hibernate.ddl-auto=${JPA_DDL_AUTO:update}
spring.jpa.show-sql=${SHOW_SQL:false}
spring.jpa.properties.hibernate.format_sql=true

# ============================================================
# JWT Configuration
# ============================================================
# IMPORTANT: Change jwt.secret in production!
# Generate a secure key: openssl rand -base64 64
jwt.secret=${JWT_SECRET:mySecretKeyForJwtTokenGenerationThisShouldBeLongAndRandom}
jwt.expiration=${JWT_EXPIRATION:86400000}

# ============================================================
# CORS Configuration
# ============================================================
# Comma-separated list of allowed origins
# Production: Set to your actual domain (https://yourdomain.com)
cors.allowed-origins=${CORS_ORIGINS:http://localhost:3000}

# ============================================================
# File Upload
# ============================================================
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB

# ============================================================
# Logging
# ============================================================
# In production, use WARN or ERROR level
logging.level.root=${LOG_LEVEL:INFO}
logging.level.com.stockdsl=${APP_LOG_LEVEL:DEBUG}
logging.level.org.springframework.web=INFO
logging.level.org.hibernate.SQL=${SQL_LOG_LEVEL:WARN}

# ============================================================
# Python Configuration
# ============================================================
python.executable=${PYTHON_PATH:python3}

# ============================================================
# Actuator (Health Checks for AWS)
# ============================================================
management.endpoints.web.exposure.include=health,info
management.endpoint.health.show-details=when_authorized
